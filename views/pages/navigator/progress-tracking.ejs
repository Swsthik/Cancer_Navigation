<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>MedConnect - Progress Tracking</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.css" rel="stylesheet" />
    <style>
      :root {
        --primary-blue: #2a5c82;
        --secondary-blue: #5c9baf;
        --accent-teal: #4ecdc4;
      }

      body {
        background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
        min-height: 100vh;
      }

      .content-container {
        background: rgba(255, 255, 255, 0.95);
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        border-radius: 15px;
        margin-top: 2rem;
        margin-bottom: 2rem;
      }

      .btn-medical {
        background: var(--accent-teal);
        color: white;
        padding: 12px 30px;
        transition: all 0.3s ease;
      }

      .btn-medical:hover {
        background: var(--secondary-blue);
        transform: translateY(-2px);
      }

      .progress-card {
        border-radius: 15px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
      }

      .wave-bg {
        position: fixed;
        bottom: 0;
        left: 0;
        width: 100%;
        height: 100px;
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1440 320'%3E%3Cpath fill='%232a5c82' fill-opacity='0.1' d='M0,96L48,112C96,128,192,160,288,160C384,160,480,128,576,122.7C672,117,768,139,864,149.3C960,160,1056,160,1152,138.7C1248,117,1344,75,1392,53.3L1440,32L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z'%3E%3C/path%3E%3C/svg%3E");
        background-size: cover;
        background-repeat: no-repeat;
        z-index: -1;
      }
    </style>
  </head>
  <body class="bg-gray-50">
    <%- include('../../partials/navigator-header') %>
    <%- include('../../partials/navigator-sidebar') %>

    <div class="p-4 sm:ml-64">
      <div class="p-4 rounded-lg mt-14">
        <div class="content-container p-6">
          <div class="d-flex justify-content-between align-items-center mb-4">
            <h2 style="color: var(--primary-blue);">Patient Progress Tracking</h2>
            <button class="btn btn-medical" onclick="addNewPatient()">
              <i class="fas fa-plus me-2"></i>Add New Patient
            </button>
          </div>

          <div class="row mb-4">
            <div class="col-md-3">
              <div class="progress-card p-4">
                <h5 class="mb-3">Active Patients</h5>
                <h2 class="mb-0" style="color: var(--primary-blue);">24</h2>
                <p class="text-muted mb-0"><small>↑ 12% from last month</small></p>
              </div>
            </div>
            <div class="col-md-3">
              <div class="progress-card p-4">
                <h5 class="mb-3">Pending Tasks</h5>
                <h2 class="mb-0" style="color: var(--secondary-blue);">12</h2>
                <p class="text-muted mb-0"><small>3 high priority</small></p>
              </div>
            </div>
            <div class="col-md-3">
              <div class="progress-card p-4">
                <h5 class="mb-3">Completed Tasks</h5>
                <h2 class="mb-0" style="color: var(--accent-teal);">45</h2>
                <p class="text-muted mb-0"><small>This week</small></p>
              </div>
            </div>
            <div class="col-md-3">
              <div class="progress-card p-4">
                <h5 class="mb-3">Critical Cases</h5>
                <h2 class="mb-0" style="color: #ef4444;">3</h2>
                <p class="text-muted mb-0"><small>Needs immediate attention</small></p>
              </div>
            </div>
          </div>

          <div class="filter-section mb-4">
            <div class="row g-3">
              <div class="col-md-4">
                <div class="input-group">
                  <span class="input-group-text">
                    <i class="fas fa-search"></i>
                  </span>
                  <input type="text" class="form-control" placeholder="Search patients..." id="searchPatients">
                </div>
              </div>
              <div class="col-md-3">
                <select class="form-select" id="statusFilter">
                  <option value="">All Statuses</option>
                  <option value="active">Active</option>
                  <option value="pending">Pending</option>
                  <option value="completed">Completed</option>
                  <option value="critical">Critical</option>
                </select>
              </div>
              <div class="col-md-3">
                <input type="text" class="form-control" id="dateRange" placeholder="Date Range">
              </div>
              <div class="col-md-2">
                <button class="btn btn-medical w-100" onclick="applyFilters()">
                  <i class="fas fa-filter me-2"></i>Apply
                </button>
              </div>
            </div>
          </div>

          <div class="chart-container mb-4">
            <canvas id="progressChart"></canvas>
          </div>

          <div id="patientsList">
            <!-- Patient Progress Cards -->
            <div class="progress-card p-4">
              <div class="d-flex justify-content-between align-items-start mb-3">
                <div>
                  <h5>Sarah Johnson</h5>
                  <p class="text-muted mb-0">MRN: 1234567 • Breast Cancer Stage II</p>
                </div>
                <span class="status-badge status-pending">2 Tasks Pending</span>
              </div>
              <div class="timeline-item ps-4">
                <p class="mb-1"><strong>Next Appointment:</strong> March 15, 2024</p>
                <p class="mb-1"><strong>Last Contact:</strong> 2 days ago</p>
                <p class="mb-0"><strong>Care Plan Progress:</strong> 75%</p>
              </div>
              <div class="progress mb-3">
                <div class="progress-bar bg-success" role="progressbar" style="width: 75%"></div>
              </div>
              <div class="d-flex justify-content-end">
                <button class="btn btn-outline-secondary me-2" onclick="viewDetails('1234567')">
                  <i class="fas fa-eye me-2"></i>View Details
                </button>
                <button class="btn btn-outline-secondary me-2" onclick="scheduleAppointment('1234567')">
                  <i class="fas fa-calendar me-2"></i>Schedule
                </button>
                <button class="btn btn-medical" onclick="updateProgress('1234567')">
                  <i class="fas fa-edit me-2"></i>Update Progress
                </button>
              </div>
            </div>

            <div class="progress-card p-4">
              <div class="d-flex justify-content-between align-items-start mb-3">
                <div>
                  <h5>Michael Chen</h5>
                  <p class="text-muted mb-0">MRN: 1234568 • Lung Cancer Stage III</p>
                </div>
                <span class="status-badge status-critical">Critical</span>
              </div>
              <div class="timeline-item ps-4">
                <p class="mb-1"><strong>Next Appointment:</strong> March 12, 2024</p>
                <p class="mb-1"><strong>Last Contact:</strong> 5 days ago</p>
                <p class="mb-0"><strong>Care Plan Progress:</strong> 45%</p>
              </div>
              <div class="progress mb-3">
                <div class="progress-bar bg-warning" role="progressbar" style="width: 45%"></div>
              </div>
              <div class="d-flex justify-content-end">
                <button class="btn btn-outline-secondary me-2" onclick="viewDetails('1234568')">
                  <i class="fas fa-eye me-2"></i>View Details
                </button>
                <button class="btn btn-outline-secondary me-2" onclick="scheduleAppointment('1234568')">
                  <i class="fas fa-calendar me-2"></i>Schedule
                </button>
                <button class="btn btn-medical" onclick="updateProgress('1234568')">
                  <i class="fas fa-edit me-2"></i>Update Progress
                </button>
              </div>
            </div>

            <div class="progress-card p-4">
              <div class="d-flex justify-content-between align-items-start mb-3">
                <div>
                  <h5>Emily Rodriguez</h5>
                  <p class="text-muted mb-0">MRN: 1234569 • Colorectal Cancer Stage I</p>
                </div>
                <span class="status-badge status-completed">On Track</span>
              </div>
              <div class="timeline-item ps-4">
                <p class="mb-1"><strong>Next Appointment:</strong> March 20, 2024</p>
                <p class="mb-1"><strong>Last Contact:</strong> Today</p>
                <p class="mb-0"><strong>Care Plan Progress:</strong> 90%</p>
              </div>
              <div class="progress mb-3">
                <div class="progress-bar bg-success" role="progressbar" style="width: 90%"></div>
              </div>
              <div class="d-flex justify-content-end">
                <button class="btn btn-outline-secondary me-2" onclick="viewDetails('1234569')">
                  <i class="fas fa-eye me-2"></i>View Details
                </button>
                <button class="btn btn-outline-secondary me-2" onclick="scheduleAppointment('1234569')">
                  <i class="fas fa-calendar me-2"></i>Schedule
                </button>
                <button class="btn btn-medical" onclick="updateProgress('1234569')">
                  <i class="fas fa-edit me-2"></i>Update Progress
                </button>
              </div>
            </div>
          </div>

          <div class="quick-actions">
            <button class="quick-action-btn" onclick="showEmergencyContacts()" title="Emergency Contacts">
              <i class="fas fa-phone"></i>
            </button>
            <button class="quick-action-btn" onclick="showQuickNotes()" title="Quick Notes">
              <i class="fas fa-sticky-note"></i>
            </button>
            <button class="quick-action-btn" onclick="exportData()" title="Export Data">
              <i class="fas fa-download"></i>
            </button>
          </div>
        </div>
      </div>
    </div>

    <div class="wave-bg"></div>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/momentjs/latest/moment.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.min.js"></script>
    <script src="/js/navigator.js"></script>
  </body>
</html>