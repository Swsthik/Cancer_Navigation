  <%- include('../../layouts/doctor-layout', {
    title: "Patient Information",
    page: "patient-info",
    doctor: doctor,
    content: 'pages/doctor/patient-info-content'
  }) %>

  

  <!-- Add Family History Modal -->
  <div class="modal fade" id="addFamilyHistoryModal" tabindex="-1" aria-labelledby="addFamilyHistoryModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="addFamilyHistoryModalLabel">Add Family History Entry</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <div class="mb-3">
            <label for="familyMember" class="form-label">Family Member</label>
            <input type="text" class="form-control" id="familyMember" placeholder="e.g., Father, Sister, Maternal Grandmother">
          </div>
          <div class="mb-3">
            <label for="familyCondition" class="form-label">Medical Condition</label>
            <input type="text" class="form-control" id="familyCondition" placeholder="e.g., Breast Cancer, Diabetes, Heart Disease">
          </div>
          <div class="mb-3">
            <label for="familyAge" class="form-label">Age at Diagnosis</label>
            <input type="number" class="form-control" id="familyAge" placeholder="Age when condition was diagnosed">
          </div>
          <div class="mb-3">
            <label for="familyNotes" class="form-label">Additional Notes</label>
            <textarea class="form-control" id="familyNotes" rows="3" placeholder="Additional details about treatment, outcome, etc."></textarea>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
          <button type="button" class="btn btn-medical">Add Entry</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Add Health Metrics Modal -->
  <div class="modal fade" id="addMetricsModal" tabindex="-1" aria-labelledby="addMetricsModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="addMetricsModalLabel">Add Health Metrics</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <div class="row mb-3">
            <div class="col-md-6">
              <label for="metricsDate" class="form-label">Date</label>
              <input type="date" class="form-control" id="metricsDate">
            </div>
            <div class="col-md-6">
              <label for="metricsType" class="form-label">Metrics Type</label>
              <select class="form-select" id="metricsType">
                <option value="routine">Routine Check-up</option>
                <option value="pre-chemo">Pre-Chemotherapy</option>
                <option value="post-chemo">Post-Chemotherapy</option>
                <option value="follow-up">Follow-up</option>
              </select>
            </div>
          </div>
          
          <h6 class="mb-3">Blood Work</h6>
          <div class="row mb-3">
            <div class="col-md-4">
              <label for="wbc" class="form-label">White Blood Cell Count (K/μL)</label>
              <input type="number" step="0.1" class="form-control" id="wbc">
            </div>
            <div class="col-md-4">
              <label for="hemoglobin" class="form-label">Hemoglobin (g/dL)</label>
              <input type="number" step="0.1" class="form-control" id="hemoglobin">
            </div>
            <div class="col-md-4">
              <label for="platelets" class="form-label">Platelet Count (K/μL)</label>
              <input type="number" class="form-control" id="platelets">
            </div>
          </div>
          
          <h6 class="mb-3">Vital Signs</h6>
          <div class="row mb-3">
            <div class="col-md-3">
              <label for="systolic" class="form-label">Systolic BP (mmHg)</label>
              <input type="number" class="form-control" id="systolic">
            </div>
            <div class="col-md-3">
              <label for="diastolic" class="form-label">Diastolic BP (mmHg)</label>
              <input type="number" class="form-control" id="diastolic">
            </div>
            <div class="col-md-3">
              <label for="weight" class="form-label">Weight (kg)</label>
              <input type="number" step="0.1" class="form-control" id="weight">
            </div>
            <div class="col-md-3">
              <label for="temperature" class="form-label">Temperature (°C)</label>
              <input type="number" step="0.1" class="form-control" id="temperature">
            </div>
          </div>
          
          <h6 class="mb-3">Cancer-Specific Markers</h6>
          <div class="row mb-3">
            <div class="col-md-6">
              <label for="tumorMarker" class="form-label">CA 15-3 (U/mL)</label>
              <input type="number" step="0.1" class="form-control" id="tumorMarker">
            </div>
            <div class="col-md-6">
              <label for="otherMarker" class="form-label">Other Marker (Optional)</label>
              <input type="text" class="form-control" id="otherMarker" placeholder="Marker name and value">
            </div>
          </div>
          
          <div class="mb-3">
            <label for="metricsNotes" class="form-label">Additional Notes</label>
            <textarea class="form-control" id="metricsNotes" rows="3" placeholder="Any additional observations or notes"></textarea>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
          <button type="button" class="btn btn-medical">Save Metrics</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Upload Report Modal -->
  <div class="modal fade" id="uploadReportModal" tabindex="-1" aria-labelledby="uploadReportModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="uploadReportModalLabel">Upload Medical Report</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <div class="mb-3">
            <label for="reportDate" class="form-label">Report Date</label>
            <input type="date" class="form-control" id="reportDate">
          </div>
          <div class="mb-3">
            <label for="reportType" class="form-label">Report Type</label>
            <select class="form-select" id="reportType">
              <option value="" selected disabled>Select report type</option>
              <option value="blood">Blood Work</option>
              <option value="imaging">Imaging (X-ray, CT, MRI)</option>
              <option value="pathology">Pathology</option>
              <option value="surgical">Surgical</option>
              <option value="consultation">Consultation</option>
              <option value="other">Other</option>
            </select>
          </div>
          <div class="mb-3">
            <label for="reportDescription" class="form-label">Description</label>
            <textarea class="form-control" id="reportDescription" rows="2" placeholder="Brief description of the report"></textarea>
          </div>
          <div class="mb-3">
            <label for="reportFile" class="form-label">Upload File</label>
            <input class="form-control" type="file" id="reportFile">
            <div class="form-text">Accepted formats: PDF, JPG, PNG (Max size: 10MB)</div>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
          <button type="button" class="btn btn-medical">Upload Report</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Generate Report Modal -->
  <div class="modal fade" id="generateReportModal" tabindex="-1" aria-labelledby="generateReportModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="generateReportModalLabel">Generate Patient Report</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <div class="mb-3">
            <label for="reportTitle" class="form-label">Report Title</label>
            <input type="text" class="form-control" id="reportTitle" placeholder="e.g., Treatment Summary, Progress Report">
          </div>
          <div class="mb-3">
            <label for="reportPeriod" class="form-label">Report Period</label>
            <select class="form-select" id="reportPeriod">
              <option value="all">All Records</option>
              <option value="last-month">Last Month</option>
              <option value="last-3-months">Last 3 Months</option>
              <option value="last-6-months">Last 6 Months</option>
              <option value="custom">Custom Date Range</option>
            </select>
          </div>
          <div class="mb-3" id="customDateRange" style="display: none;">
            <div class="row">
              <div class="col-md-6">
                <label for="startDate" class="form-label">Start Date</label>
                <input type="date" class="form-control" id="startDate">
              </div>
              <div class="col-md-6">
                <label for="endDate" class="form-label">End Date</label>
                <input type="date" class="form-control" id="endDate">
              </div>
            </div>
          </div>
          <div class="mb-3">
            <label class="form-label">Include Sections</label>
            <div class="form-check">
              <input class="form-check-input" type="checkbox" value="" id="includeMedical" checked>
              <label class="form-check-label" for="includeMedical">
                Medical History
              </label>
            </div>
            <div class="form-check">
              <input class="form-check-input" type="checkbox" value="" id="includeMetrics" checked>
              <label class="form-check-label" for="includeMetrics">
                Health Metrics
              </label>
            </div>
            <div class="form-check">
              <input class="form-check-input" type="checkbox" value="" id="includeReports" checked>
              <label class="form-check-label" for="includeReports">
                Medical Reports
              </label>
            </div>
            <div class="form-check">
              <input class="form-check-input" type="checkbox" value="" id="includeNotes" checked>
              <label class="form-check-label" for="includeNotes">
                Doctor's Notes
              </label>
            </div>
            <div class="form-check">
              <input class="form-check-input" type="checkbox" value="" id="includeRisk" checked>
              <label class="form-check-label" for="includeRisk">
                Risk Assessment
              </label>
            </div>
          </div>
          <div class="mb-3">
            <label for="reportFormat" class="form-label">Report Format</label>
            <select class="form-select" id="reportFormat">
              <option value="pdf">PDF</option>
              <option value="docx">Word Document</option>
              <option value="html">HTML</option>
            </select>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
          <button type="button" class="btn btn-medical">Generate Report</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Add Note Modal -->
  <div class="modal fade" id="addNoteModal" tabindex="-1" aria-labelledby="addNoteModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="addNoteModalLabel">Add Doctor's Note</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <div class="mb-3">
            <label for="noteTitle" class="form-label">Title</label>
            <input type="text" class="form-control" id="noteTitle" placeholder="e.g., Follow-up Consultation, Treatment Discussion">
          </div>
          <div class="mb-3">
            <label for="noteDate" class="form-label">Date</label>
            <input type="date" class="form-control" id="noteDate">
          </div>
          <div class="mb-3">
            <label for="noteContent" class="form-label">Note Content</label>
            <textarea class="form-control" id="noteContent" rows="6" placeholder="Enter detailed notes about the patient's condition, treatment, observations, etc."></textarea>
          </div>
          <div class="mb-3">
            <label for="notePlan" class="form-label">Treatment Plan</label>
            <textarea class="form-control" id="notePlan" rows="3" placeholder="Enter treatment plan, next steps, or recommendations"></textarea>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
          <button type="button" class="btn btn-medical">Save Note</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Edit Patient Modal -->
  <div class="modal fade" id="editPatientModal" tabindex="-1" aria-labelledby="editPatientModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="editPatientModalLabel">Edit Patient Information</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <ul class="nav nav-tabs mb-3" id="editPatientTabs" role="tablist">
            <li class="nav-item" role="presentation">
              <button class="nav-link active" id="personal-tab" data-bs-toggle="tab" data-bs-target="#personal" type="button" role="tab" aria-controls="personal" aria-selected="true">Personal Info</button>
            </li>
            <li class="nav-item" role="presentation">
              <button class="nav-link" id="medical-info-tab" data-bs-toggle="tab" data-bs-target="#medical-info" type="button" role="tab" aria-controls="medical-info" aria-selected="false">Medical Info</button>
            </li>
            <li class="nav-item" role="presentation">
              <button class="nav-link" id="emergency-tab" data-bs-toggle="tab" data-bs-target="#emergency" type="button" role="tab" aria-controls="emergency" aria-selected="false">Emergency Contact</button>
            </li>
          </ul>
          <div class="tab-content" id="editPatientTabsContent">
            <div class="tab-pane fade show active" id="personal" role="tabpanel" aria-labelledby="personal-tab">
              <div class="row mb-3">
                <div class="col-md-6">
                  <label for="patientFirstName" class="form-label">First Name</label>
                  <input type="text" class="form-control" id="patientFirstName" value="Emma">
                </div>
                <div class="col-md-6">
                  <label for="patientLastName" class="form-label">Last Name</label>
                  <input type="text" class="form-control" id="patientLastName" value="Thompson">
                </div>
              </div>
              <div class="row mb-3">
                <div class="col-md-6">
                  <label for="patientDOB" class="form-label">Date of Birth</label>
                  <input type="date" class="form-control" id="patientDOB" value="1983-05-12">
                </div>
                <div class="col-md-6">
                  <label for="patientGender" class="form-label">Gender</label>
                  <select class="form-select" id="patientGender">
                    <option>Select Gender</option>
                    <option value="female" selected>Female</option>
                    <option value="male">Male</option>
                    <option value="other">Other</option>
                  </select>
                </div>
              </div>
              <div class="row mb-3">
                <div class="col-md-6">
                  <label for="patientPhone" class="form-label">Phone Number</label>
                  <input type="tel" class="form-control" id="patientPhone" value="(555) 123-4567">
                </div>
                <div class="col-md-6">
                  <label for="patientEmail" class="form-label">Email</label>
                  <input type="email" class="form-control" id="patientEmail" value="emma.thompson@example.com">
                </div>
              </div>
              <div class="mb-3">
                <label for="patientAddress" class="form-label">Address</label>
                <textarea class="form-control" id="patientAddress" rows="2">123 Main St, Anytown, CA 90210</textarea>
              </div>
            </div>
            <div class="tab-pane fade" id="medical-info" role="tabpanel" aria-labelledby="medical-info-tab">
              <div class="row mb-3">
                <div class="col-md-6">
                  <label for="patientDiagnosis" class="form-label">Primary Diagnosis</label>
                  <input type="text" class="form-control" id="patientDiagnosis" value="Stage 3 Breast Cancer">
                </div>
                <div class="col-md-6">
                  <label for="diagnosisDate" class="form-label">Diagnosis Date</label>
                  <input type="date" class="form-control" id="diagnosisDate" value="2025-01-15">
                </div>
              </div>
              <div class="row mb-3">
                <div class="col-md-6">
                  <label for="patientBloodType" class="form-label">Blood Type</label>
                  <select class="form-select" id="patientBloodType">
                    <option>Select Blood Type</option>
                    <option value="A+">A+</option>
                    <option value="A-">A-</option>
                    <option value="B+">B+</option>
                    <option value="B-">B-</option>
                    <option value="AB+">AB+</option>
                    <option value="AB-">AB-</option>
                    <option value="O+">O+</option>
                    <option value="O-">O-</option>
                  </select>
                </div>
                <div class="col-md-6">
                  <label for="patientRiskLevel" class="form-label">Risk Level</label>
                  <select class="form-select" id="patientRiskLevel">
                    <option>Select Risk Level</option>
                    <option value="high" selected>High Risk</option>
                    <option value="medium">Medium Risk</option>
                    <option value="low">Low Risk</option>
                  </select>
                </div>
              </div>
              <div class="mb-3">
                <label for="patientAllergies" class="form-label">Allergies</label>
                <textarea class="form-control" id="patientAllergies" rows="2">Penicillin, Sulfa Drugs</textarea>
              </div>
              <div class="mb-3">
                <label for="patientMedications" class="form-label">Current Medications</label>
                <textarea class="form-control" id="patientMedications" rows="3">Doxorubicin, Cyclophosphamide, Ondansetron (for nausea), Iron supplements</textarea>
              </div>
            </div>
            <div class="tab-pane fade" id="emergency" role="tabpanel" aria-labelledby="emergency-tab">
              <div class="row mb-3">
                <div class="col-md-6">
                  <label for="emergencyName" class="form-label">Emergency Contact Name</label>
                  <input type="text" class="form-control" id="emergencyName" value="John Thompson">
                </div>
                <div class="col-md-6">
                  <label for="emergencyRelation" class="form-label">Relationship</label>
                  <input type="text" class="form-control" id="emergencyRelation" value="Husband">
                </div>
              </div>
              <div class="row mb-3">
                <div class="col-md-6">
                  <label for="emergencyPhone" class="form-label">Phone Number</label>
                  <input type="tel" class="form-control" id="emergencyPhone" value="(555) 987-6543">
                </div>
                <div class="col-md-6">
                  <label for="emergencyEmail" class="form-label">Email</label>
                  <input type="email" class="form-control" id="emergencyEmail" value="john.thompson@example.com">
                </div>
              </div>
              <div class="mb-3">
                <label for="emergencyAddress" class="form-label">Address</label>
                <textarea class="form-control" id="emergencyAddress" rows="2">123 Main St, Anytown, CA 90210</textarea>
              </div>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
          <button type="button" class="btn btn-medical">Save Changes</button>
        </div>
      </div>
    </div>
  </div>

  <div class="decorative-wave"></div>

  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Handle custom date range for report generation
      const reportPeriod = document.getElementById('reportPeriod');
      const customDateRange = document.getElementById('customDateRange');
      
      if(reportPeriod) {
        reportPeriod.addEventListener('change', function() {
          customDateRange.style.display = this.value === 'custom' ? 'block' : 'none';
        });
      }
      
      // Initialize tooltips
      const tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));
      tooltipTriggerList.map(function (tooltipTriggerEl) {
        return new bootstrap.Tooltip(tooltipTriggerEl);
      });
    });
  </script>

