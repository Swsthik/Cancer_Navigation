<%- include('../../layouts/doctor-layout', {
  title: "Appointment Management",
  page: "appointment-management",
  doctor: doctor,
  content: 'pages/doctor/appointment-management-content'
}) %>

<div class="container-fluid">
  <div class="row mb-4">
    <div class="col-12">
      <div class="card card-medical">
        <div class="card-body">
          <h5 class="card-title">Appointment Management</h5>
          <!-- Rest of your appointment management content -->
          <!-- Notifications -->
          <div class="alert alert-info d-flex align-items-center" role="alert">
            <i class="fas fa-bell fs-5 me-3"></i>
            <div>You have 5 new appointment requests pending approval</div>
          </div>
          
          <!-- Search and Filter -->
          <div class="row mb-4">
            <div class="col-md-6">
              <div class="search-container">
                <i class="fas fa-search"></i>
                <input type="text" class="form-control search-input" placeholder="Search by patient name, ID, or condition...">
              </div>
            </div>
            <div class="col-md-6 d-flex justify-content-end">
              <div class="filter-dropdown me-2">
                <button class="btn btn-outline-secondary dropdown-toggle" type="button" id="filterDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                  <i class="fas fa-filter me-2"></i>Filter
                </button>
                <div class="dropdown-menu" aria-labelledby="filterDropdown">
                  <h6 class="dropdown-header">Risk Level</h6>
                  <div class="mb-2">
                    <div class="form-check">
                      <input class="form-check-input" type="checkbox" value="" id="highRiskCheck" checked>
                      <label class="form-check-label" for="highRiskCheck">
                        High Risk
                      </label>
                    </div>
                    <div class="form-check">
                      <input class="form-check-input" type="checkbox" value="" id="mediumRiskCheck" checked>
                      <label class="form-check-label" for="mediumRiskCheck">
                        Medium Risk
                      </label>
                    </div>
                    <div class="form-check">
                      <input class="form-check-input" type="checkbox" value="" id="lowRiskCheck" checked>
                      <label class="form-check-label" for="lowRiskCheck">
                        Low Risk
                      </label>
                    </div>
                  </div>
                  
                  <h6 class="dropdown-header">Status</h6>
                  <div class="mb-2">
                    <div class="form-check">
                      <input class="form-check-input" type="checkbox" value="" id="pendingCheck" checked>
                      <label class="form-check-label" for="pendingCheck">
                        Pending
                      </label>
                    </div>
                    <div class="form-check">
                      <input class="form-check-input" type="checkbox" value="" id="approvedCheck" checked>
                      <label class="form-check-label" for="approvedCheck">
                        Approved
                      </label>
                    </div>
                    <div class="form-check">
                      <input class="form-check-input" type="checkbox" value="" id="completedCheck" checked>
                      <label class="form-check-label" for="completedCheck">
                        Completed
                      </label>
                    </div>
                    <div class="form-check">
                      <input class="form-check-input" type="checkbox" value="" id="rejectedCheck" checked>
                      <label class="form-check-label" for="rejectedCheck">
                        Rejected
                      </label>
                    </div>
                  </div>
                  
                  <h6 class="dropdown-header">Location</h6>
                  <select class="form-select form-select-sm mb-2">
                    <option value="all" selected>All Locations</option>
                    <option value="main">Main Hospital</option>
                    <option value="clinic-a">Clinic A</option>
                    <option value="clinic-b">Clinic B</option>
                    <option value="virtual">Virtual</option>
                  </select>
                  
                  <div class="d-flex justify-content-between mt-3">
                    <button class="btn btn-sm btn-outline-secondary">Reset</button>
                    <button class="btn btn-sm btn-medical">Apply Filters</button>
                  </div>
                </div>
              </div>
              
              <div class="dropdown">
                <button class="btn btn-outline-secondary dropdown-toggle" type="button" id="sortDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                  <i class="fas fa-sort me-2"></i>Sort
                </button>
                <ul class="dropdown-menu" aria-labelledby="sortDropdown">
                  <li><a class="dropdown-item" href="#">Date (Newest First)</a></li>
                  <li><a class="dropdown-item" href="#">Date (Oldest First)</a></li>
                  <li><a class="dropdown-item" href="#">Patient Name (A-Z)</a></li>
                  <li><a class="dropdown-item" href="#">Risk Level (High-Low)</a></li>
                  <li><a class="dropdown-item" href="#">Status</a></li>
                </ul>
              </div>
            </div>
          </div>
          
          <!-- Appointment Tabs -->
          <ul class="nav nav-tabs mb-4" id="appointmentTabs" role="tablist">
            <li class="nav-item" role="presentation">
              <button class="nav-link active" id="pending-tab" data-bs-toggle="tab" data-bs-target="#pending" type="button" role="tab" aria-controls="pending" aria-selected="true">
                <i class="fas fa-hourglass-half me-2"></i>Pending (5)
              </button>
            </li>
            <li class="nav-item" role="presentation">
              <button class="nav-link" id="upcoming-tab" data-bs-toggle="tab" data-bs-target="#upcoming" type="button" role="tab" aria-controls="upcoming" aria-selected="false">
                <i class="fas fa-calendar-day me-2"></i>Upcoming (8)
              </button>
            </li>
            <li class="nav-item" role="presentation">
              <button class="nav-link" id="completed-tab" data-bs-toggle="tab" data-bs-target="#completed" type="button" role="tab" aria-controls="completed" aria-selected="false">
                <i class="fas fa-check-circle me-2"></i>Completed (12)
              </button>
            </li>
            <li class="nav-item" role="presentation">
              <button class="nav-link" id="rejected-tab" data-bs-toggle="tab" data-bs-target="#rejected" type="button" role="tab" aria-controls="rejected" aria-selected="false">
                <i class="fas fa-times-circle me-2"></i>Rejected (3)
              </button>
            </li>
          </ul>
          
          <div class="tab-content" id="appointmentTabsContent">
            <!-- Pending Appointments -->
            <div class="tab-pane fade show active" id="pending" role="tabpanel" aria-labelledby="pending-tab">
              <!-- Appointment Card 1 -->
              <div class="card card-medical mb-3 appointment-card">
                <div class="card-body">
                  <div class="row">
                    <div class="col-md-8">
                      <div class="d-flex align-items-center mb-2">
                        <span class="badge status-pending me-2">Pending</span>
                        <span class="badge risk-badge-high me-2">High Risk</span>
                        <span class="text-muted"><i class="far fa-clock me-1"></i>Requested: Mar 21, 2025</span>
                      </div>
                      <h5 class="mb-1">James Wilson</h5>
                      <div class="text-muted mb-2"><i class="fas fa-disease me-1"></i>Stage 3 Lung Cancer</div>
                      <div class="d-flex flex-wrap">
                        <div class="me-3 text-muted"><i class="fas fa-calendar-alt me-1"></i>Mar 24, 2025</div>
                        <div class="me-3 text-muted"><i class="far fa-clock me-1"></i>10:00 - 11:00 AM</div>
                        <div class="text-muted"><i class="fas fa-map-marker-alt me-1"></i>Main Hospital, Room 302</div>
                      </div>
                      <div class="mt-2">
                        <small class="text-muted">Reason: Follow-up after chemotherapy session, experiencing increased fatigue and nausea</small>
                      </div>
                    </div>
                    <div class="col-md-4 d-flex flex-column justify-content-center align-items-end">
                      <div class="mb-2 time-slot-suggestion p-2 rounded w-100 text-center">
                        <small><i class="fas fa-robot me-1"></i>AI Suggestion: Approve for 10:30 AM</small>
                      </div>
                      <div class="d-flex mb-2">
                        <button class="btn btn-sm btn-success me-2" data-bs-toggle="modal" data-bs-target="#approveModal" data-patient="James Wilson" data-date="Mar 24, 2025" data-time="10:00 - 11:00 AM">
                          <i class="fas fa-check me-1"></i>Approve
                        </button>
                        <button class="btn btn-sm btn-danger me-2" data-bs-toggle="modal" data-bs-target="#rejectModal" data-patient="James Wilson" data-date="Mar 24, 2025" data-time="10:00 - 11:00 AM">
                          <i class="fas fa-times me-1"></i>Reject
                        </button>
                        <button class="btn btn-sm btn-primary" data-bs-toggle="modal" data-bs-target="#rescheduleModal" data-patient="James Wilson" data-date="Mar 24, 2025" data-time="10:00 - 11:00 AM">
                          <i class="fas fa-sync-alt me-1"></i>Reschedule
                        </button>
                      </div>
                      <button class="btn btn-sm btn-outline-secondary" data-bs-toggle="modal" data-bs-target="#patientDetailsModal" data-patient-id="JW001">
                        <i class="fas fa-user me-1"></i>View Patient Details
                      </button>
                    </div>
                  </div>
                </div>
              </div>
              
              <!-- Appointment Card 2 -->
              <div class="card card-medical mb-3 appointment-card">
                <div class="card-body">
                  <div class="row">
                    <div class="col-md-8">
                      <div class="d-flex align-items-center mb-2">
                        <span class="badge status-pending me-2">Pending</span>
                        <span class="badge risk-badge-medium me-2">Medium Risk</span>
                        <span class="text-muted"><i class="far fa-clock me-1"></i>Requested: Mar 20, 2025</span>
                      </div>
                      <h5 class="mb-1">Sarah Johnson</h5>
                      <div class="text-muted mb-2"><i class="fas fa-disease me-1"></i>Stage 2 Breast Cancer</div>
                      <div class="d-flex flex-wrap">
                        <div class="me-3 text-muted"><i class="fas fa-calendar-alt me-1"></i>Mar 23, 2025</div>
                        <div class="me-3 text-muted"><i class="far fa-clock me-1"></i>2:00 - 3:00 PM</div>
                        <div class="text-muted"><i class="fas fa-map-marker-alt me-1"></i>Clinic A, Room 105</div>
                      </div>
                      <div class="mt-2">
                        <small class="text-muted">Reason: Initial consultation after diagnosis, seeking treatment options</small>
                      </div>
                    </div>
                    <div class="col-md-4 d-flex flex-column justify-content-center align-items-end">
                      <div class="mb-2 time-slot-suggestion p-2 rounded w-100 text-center">
                        <small><i class="fas fa-robot me-1"></i>AI Suggestion: Approve as requested</small>
                      </div>
                      <div class="d-flex mb-2">
                        <button class="btn btn-sm btn-success me-2" data-bs-toggle="modal" data-bs-target="#approveModal" data-patient="Sarah Johnson" data-date="Mar 23, 2025" data-time="2:00 - 3:00 PM">
                          <i class="fas fa-check me-1"></i>Approve
                        </button>
                        <button class="btn btn-sm btn-danger me-2" data-bs-toggle="modal" data-bs-target="#rejectModal" data-patient="Sarah Johnson" data-date="Mar 23, 2025" data-time="2:00 - 3:00 PM">
                          <i class="fas fa-times me-1"></i>Reject
                        </button>
                        <button class="btn btn-sm btn-primary" data-bs-toggle="modal" data-bs-target="#rescheduleModal" data-patient="Sarah Johnson" data-date="Mar 23, 2025" data-time="2:00 - 3:00 PM">
                          <i class="fas fa-sync-alt me-1"></i>Reschedule
                        </button>
                      </div>
                      <button class="btn btn-sm btn-outline-secondary" data-bs-toggle="modal" data-bs-target="#patientDetailsModal" data-patient-id="SJ002">
                        <i class="fas fa-user me-1"></i>View Patient Details
                      </button>
                    </div>
                  </div>
                </div>
              </div>
              
              <!-- Appointment Card 3 -->
              <div class="card card-medical mb-3 appointment-card">
                <div class="card-body">
                  <div class="row">
                    <div class="col-md-8">
                      <div class="d-flex align-items-center mb-2">
                        <span class="badge status-pending me-2">Pending</span>
                        <span class="badge risk-badge-low me-2">Low Risk</span>
                        <span class="text-muted"><i class="far fa-clock me-1"></i>Requested: Mar 19, 2025</span>
                      </div>
                      <h5 class="mb-1">Michael Brown</h5>
                      <div class="text-muted mb-2"><i class="fas fa-disease me-1"></i>Early Stage Thyroid Cancer</div>
                      <div class="d-flex flex-wrap">
                        <div class="me-3 text-muted"><i class="fas fa-calendar-alt me-1"></i>Mar 25, 2025</div>
                        <div class="me-3 text-muted"><i class="far fa-clock me-1"></i>9:00 - 10:00 AM</div>
                        <div class="text-muted"><i class="fas fa-map-marker-alt me-1"></i>Clinic B, Room 203</div>
                      </div>
                      <div class="mt-2">
                        <small class="text-muted">Reason: Regular follow-up, no new symptoms</small>
                      </div>
                    </div>
                    <div class="col-md-4 d-flex flex-column justify-content-center align-items-end">
                      <div class="mb-2 time-slot-suggestion p-2 rounded w-100 text-center">
                        <small><i class="fas fa-robot me-1"></i>AI Suggestion: Reschedule to Mar 26, 11:00 AM</small>
                      </div>
                      <div class="d-flex mb-2">
                        <button class="btn btn-sm btn-success me-2" data-bs-toggle="modal" data-bs-target="#approveModal" data-patient="Michael Brown" data-date="Mar 25, 2025" data-time="9:00 - 10:00 AM">
                          <i class="fas fa-check me-1"></i>Approve
                        </button>
                        <button class="btn btn-sm btn-danger me-2" data-bs-toggle="modal" data-bs-target="#rejectModal" data-patient="Michael Brown" data-date="Mar 25, 2025" data-time="9:00 - 10:00 AM">
                          <i class="fas fa-times me-1"></i>Reject
                        </button>
                        <button class="btn btn-sm btn-primary" data-bs-toggle="modal" data-bs-target="#rescheduleModal" data-patient="Michael Brown" data-date="Mar 25, 2025" data-time="9:00 - 10:00 AM">
                          <i class="fas fa-sync-alt me-1"></i>Reschedule
                        </button>
                      </div>
                      <button class="btn btn-sm btn-outline-secondary" data-bs-toggle="modal" data-bs-target="#patientDetailsModal" data-patient-id="MB003">
                        <i class="fas fa-user me-1"></i>View Patient Details
                      </button>
                    </div>
                  </div>
                </div>
              </div>
              
              <!-- More pending appointments would go here -->
              <div class="card card-medical mb-3 appointment-card">
                <div class="card-body">
                  <div class="row">
                    <div class="col-md-8">
                      <div class="d-flex align-items-center mb-2">
                        <span class="badge status-pending me-2">Pending</span>
                        <span class="badge risk-badge-high me-2">High Risk</span>
                        <span class="text-muted"><i class="far fa-clock me-1"></i>Requested: Mar 18, 2025</span>
                      </div>
                      <h5 class="mb-1">Robert Davis</h5>
                      <div class="text-muted mb-2"><i class="fas fa-disease me-1"></i>Metastatic Lung Cancer</div>
                      <div class="d-flex flex-wrap">
                        <div class="me-3 text-muted"><i class="fas fa-calendar-alt me-1"></i>Mar 22, 2025</div>
                        <div class="me-3 text-muted"><i class="far fa-clock me-1"></i>1:00 - 2:00 PM</div>
                        <div class="text-muted"><i class="fas fa-map-marker-alt me-1"></i>Main Hospital, Room 301</div>
                      </div>
                      <div class="mt-2">
                        <small class="text-muted">Reason: Urgent consultation regarding new symptoms and treatment plan adjustment</small>
                      </div>
                    </div>
                    <div class="col-md-4 d-flex flex-column justify-content-center align-items-end">
                      <div class="mb-2 time-slot-suggestion p-2 rounded w-100 text-center bg-warning bg-opacity-10">
                        <small><i class="fas fa-exclamation-triangle me-1"></i>Priority: High Risk Patient</small>
                      </div>
                      <div class="d-flex mb-2">
                        <button class="btn btn-sm btn-success me-2" data-bs-toggle="modal" data-bs-target="#approveModal" data-patient="Robert Davis" data-date="Mar 22, 2025" data-time="1:00 - 2:00 PM">
                          <i class="fas fa-check me-1"></i>Approve
                        </button>
                        <button class="btn btn-sm btn-danger me-2" data-bs-toggle="modal" data-bs-target="#rejectModal" data-patient="Robert Davis" data-date="Mar 22, 2025" data-time="1:00 - 2:00 PM">
                          <i class="fas fa-times me-1"></i>Reject
                        </button>
                        <button class="btn btn-sm btn-primary" data-bs-toggle="modal" data-bs-target="#rescheduleModal" data-patient="Robert Davis" data-date="Mar 22, 2025" data-time="1:00 - 2:00 PM">
                          <i class="fas fa-sync-alt me-1"></i>Reschedule
                        </button>
                      </div>
                      <button class="btn btn-sm btn-outline-secondary" data-bs-toggle="modal" data-bs-target="#patientDetailsModal" data-patient-id="RD004">
                        <i class="fas fa-user me-1"></i>View Patient Details
                      </button>
                    </div>
                  </div>
                </div>
              </div>
              
              <!-- Appointment Card 5 -->
              <div class="card card-medical mb-3 appointment-card">
                <div class="card-body">
                  <div class="row">
                    <div class="col-md-8">
                      <div class="d-flex align-items-center mb-2">
                        <span class="badge status-pending me-2">Pending</span>
                        <span class="badge risk-badge-medium me-2">Medium Risk</span>
                        <span class="text-muted"><i class="far fa-clock me-1"></i>Requested: Mar 17, 2025</span>
                      </div>
                      <h5 class="mb-1">Jennifer Clark</h5>
                      <div class="text-muted mb-2"><i class="fas fa-disease me-1"></i>Stage 2 Colorectal Cancer</div>
                      <div class="d-flex flex-wrap">
                        <div class="me-3 text-muted"><i class="fas fa-calendar-alt me-1"></i>Mar 24, 2025</div>
                        <div class="me-3 text-muted"><i class="far fa-clock me-1"></i>3:00 - 4:00 PM</div>
                        <div class="text-muted"><i class="fas fa-map-marker-alt me-1"></i>Clinic A, Room 104</div>
                      </div>
                      <div class="mt-2">
                        <small class="text-muted">Reason: Post-surgery follow-up, discussion of test results</small>
                      </div>
                    </div>
                    <div class="col-md-4 d-flex flex-column justify-content-center align-items-end">
                      <div class="mb-2 time-slot-suggestion p-2 rounded w-100 text-center">
                        <small><i class="fas fa-robot me-1"></i>AI Suggestion: Approve as requested</small>
                      </div>
                      <div class="d-flex mb-2">
                        <button class="btn btn-sm btn-success me-2" data-bs-toggle="modal" data-bs-target="#approveModal" data-patient="Jennifer Clark" data-date="Mar 24, 2025" data-time="3:00 - 4:00 PM">
                          <i class="fas fa-check me-1"></i>Approve
                        </button>
                        <button class="btn btn-sm btn-danger me-2" data-bs-toggle="modal" data-bs-target="#rejectModal" data-patient="Jennifer Clark" data-date="Mar 24, 2025" data-time="3:00 - 4:00 PM">
                          <i class="fas fa-times me-1"></i>Reject
                        </button>
                        <button class="btn btn-sm btn-primary" data-bs-toggle="modal" data-bs-target="#rescheduleModal" data-patient="Jennifer Clark" data-date="Mar 24, 2025" data-time="3:00 - 4:00 PM">
                          <i class="fas fa-sync-alt me-1"></i>Reschedule
                        </button>
                      </div>
                      <button class="btn btn-sm btn-outline-secondary" data-bs-toggle="modal" data-bs-target="#patientDetailsModal" data-patient-id="JC005">
                        <i class="fas fa-user me-1"></i>View Patient Details
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            
            <!-- Upcoming Appointments Tab -->
            <div class="tab-pane fade" id="upcoming" role="tabpanel" aria-labelledby="upcoming-tab">
              <!-- Upcoming appointments would go here -->
              <div class="card card-medical mb-3 appointment-card">
                <div class="card-body">
                  <div class="row">
                    <div class="col-md-8">
                      <div class="d-flex align-items-center mb-2">
                        <span class="badge status-approved me-2">Approved</span>
                        <span class="badge risk-badge-high me-2">High Risk</span>
                      </div>
                      <h5 class="mb-1">Emma Thompson</h5>
                      <div class="text-muted mb-2"><i class="fas fa-disease me-1"></i>Stage 3 Breast Cancer</div>
                      <div class="d-flex flex-wrap">
                        <div class="me-3 text-muted"><i class="fas fa-calendar-alt me-1"></i>Today</div>
                        <div class="me-3 text-muted"><i class="far fa-clock me-1"></i>9:00 - 10:00 AM</div>
                        <div class="text-muted"><i class="fas fa-map-marker-alt me-1"></i>Main Hospital, Room 302</div>
                      </div>
                      <div class="mt-2">
                        <small class="text-muted">Reason: Follow-up Consultation</small>
                      </div>
                    </div>
                    <div class="col-md-4 d-flex flex-column justify-content-center align-items-end">
                      <div class="d-flex mb-2">
                        <button class="btn btn-sm btn-outline-medical me-2" data-bs-toggle="modal" data-bs-target="#sendReminderModal" data-patient="Emma Thompson" data-date="Today" data-time="9:00 - 10:00 AM">
                          <i class="fas fa-bell me-1"></i>Send Reminder
                        </button>
                        <button class="btn btn-sm btn-outline-danger" data-bs-toggle="modal" data-bs-target="#cancelModal" data-patient="Emma Thompson" data-date="Today" data-time="9:00 - 10:00 AM">
                          <i class="fas fa-times me-1"></i>Cancel
                        </button>
                      </div>
                      <button class="btn btn-sm btn-outline-secondary" data-bs-toggle="modal" data-bs-target="#patientDetailsModal" data-patient-id="ET001">
                        <i class="fas fa-user me-1"></i>View Patient Details
                      </button>
                    </div>
                  </div>
                </div>
              </div>
              
              <!-- More upcoming appointments would go here -->
            </div>
            
            <!-- Completed Appointments Tab -->
            <div class="tab-pane fade" id="completed" role="tabpanel" aria-labelledby="completed-tab">
              <!-- Completed appointments would go here -->
              <div class="card card-medical mb-3 appointment-card">
                <div class="card-body">
                  <div class="row">
                    <div class="col-md-8">
                      <div class="d-flex align-items-center mb-2">
                        <span class="badge status-completed me-2">Completed</span>
                        <span class="badge risk-badge-medium me-2">Medium Risk</span>
                      </div>
                      <h5 class="mb-1">David Wilson</h5>
                      <div class="text-muted mb-2"><i class="fas fa-disease me-1"></i>Stage 2 Prostate Cancer</div>
                      <div class="d-flex flex-wrap">
                        <div class="me-3 text-muted"><i class="fas fa-calendar-alt me-1"></i>Mar 15, 2025</div>
                        <div class="me-3 text-muted"><i class="far fa-clock me-1"></i>11:00 AM - 12:00 PM</div>
                        <div class="text-muted"><i class="fas fa-map-marker-alt me-1"></i>Clinic B, Room 201</div>
                      </div>
                    </div>
                    <div class="col-md-4 d-flex flex-column justify-content-center align-items-end">
                      <div class="d-flex mb-2">
                        <button class="btn btn-sm btn-outline-medical me-2" data-bs-toggle="modal" data-bs-target="#viewNotesModal" data-patient="David Wilson" data-date="Mar 15, 2025">
                          <i class="fas fa-clipboard me-1"></i>View Notes
                        </button>
                        <button class="btn btn-sm btn-outline-primary" data-bs-toggle="modal" data-bs-target="#scheduleFollowupModal" data-patient="David Wilson">
                          <i class="fas fa-calendar-plus me-1"></i>Schedule Follow-up
                        </button>
                      </div>
                      <button class="btn btn-sm btn-outline-secondary" data-bs-toggle="modal" data-bs-target="#patientDetailsModal" data-patient-id="DW006">
                        <i class="fas fa-user me-1"></i>View Patient Details
                      </button>
                    </div>
                  </div>
                </div>
              </div>
              
              <!-- More completed appointments would go here -->
            </div>
            
            <!-- Rejected Appointments Tab -->
            <div class="tab-pane fade" id="rejected" role="tabpanel" aria-labelledby="rejected-tab">
              <!-- Rejected appointments would go here -->
              <div class="card card-medical mb-3 appointment-card">
                <div class="card-body">
                  <div class="row">
                    <div class="col-md-8">
                      <div class="d-flex align-items-center mb-2">
                        <span class="badge status-rejected me-2">Rejected</span>
                        <span class="badge risk-badge-low me-2">Low Risk</span>
                      </div>
                      <h5 class="mb-1">Lisa Martinez</h5>
                      <div class="text-muted mb-2"><i class="fas fa-disease me-1"></i>Early Stage Skin Cancer</div>
                      <div class="d-flex flex-wrap">
                        <div class="me-3 text-muted"><i class="fas fa-calendar-alt me-1"></i>Mar 10, 2025</div>
                        <div class="me-3 text-muted"><i class="far fa-clock me-1"></i>2:00 - 3:00 PM</div>
                        <div class="text-muted"><i class="fas fa-map-marker-alt me-1"></i>Clinic A, Room 103</div>
                      </div>
                      <div class="mt-2">
                        <small class="text-muted">Rejection Reason: Requested specialist not available, suggested alternative specialist</small>
                      </div>
                    </div>
                    <div class="col-md-4 d-flex flex-column justify-content-center align-items-end">
                      <div class="d-flex mb-2">
                        <button class="btn btn-sm btn-outline-primary" data-bs-toggle="modal" data-bs-target="#rescheduleModal" data-patient="Lisa Martinez">
                          <i class="fas fa-sync-alt me-1"></i>Reschedule
                        </button>
                      </div>
                      <button class="btn btn-sm btn-outline-secondary" data-bs-toggle="modal" data-bs-target="#patientDetailsModal" data-patient-id="LM007">
                        <i class="fas fa-user me-1"></i>View Patient Details
                      </button>
                    </div>
                  </div>
                </div>
              </div>
              
              <!-- More rejected appointments would go here -->
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Approve Appointment Modal -->
<div class="modal fade" id="approveModal" tabindex="-1" aria-labelledby="approveModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="approveModalLabel">Approve Appointment</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <p>Are you sure you want to approve the appointment for <span id="approvePatient">Patient Name</span>?</p>
        <div class="mb-3">
          <strong>Date:</strong> <span id="approveDate">Date</span>
        </div>
        <div class="mb-3">
          <strong>Time:</strong> <span id="approveTime">Time</span>
        </div>
        <div class="mb-3">
          <label for="approveNotes" class="form-label">Additional Notes (optional)</label>
          <textarea class="form-control" id="approveNotes" rows="3" placeholder="Add any special instructions or notes for the patient"></textarea>
        </div>
        <div class="form-check mb-3">
          <input class="form-check-input" type="checkbox" id="sendApprovalNotification" checked>
          <label class="form-check-label" for="sendApprovalNotification">
            Send notification to patient
          </label>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
        <button type="button" class="btn btn-success" id="confirmApprove">Approve Appointment</button>
      </div>
    </div>
  </div>
</div>

<!-- Reject Appointment Modal -->
<div class="modal fade" id="rejectModal" tabindex="-1" aria-labelledby="rejectModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="rejectModalLabel">Reject Appointment</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <p>Are you sure you want to reject the appointment for <span id="rejectPatient">Patient Name</span>?</p>
        <div class="mb-3">
          <strong>Date:</strong> <span id="rejectDate">Date</span>
        </div>
        <div class="mb-3">
          <strong>Time:</strong> <span id="rejectTime">Time</span>
        </div>
        <div class="mb-3">
          <label for="rejectReason" class="form-label">Reason for Rejection</label>
          <select class="form-select" id="rejectReason" required>
            <option value="" selected disabled>Select a reason</option>
            <option value="unavailable">Doctor unavailable at requested time</option>
            <option value="specialist">Need to see a different specialist</option>
            <option value="tests">Additional tests required before appointment</option>
            <option value="emergency">Emergency cases taking priority</option>
            <option value="other">Other</option>
          </select>
        </div>
        <div class="mb-3" id="otherRejectReasonDiv" style="display: none;">
          <label for="otherRejectReason" class="form-label">Please Specify</label>
          <textarea class="form-control" id="otherRejectReason" rows="2"></textarea>
        </div>
        <div class="mb-3">
          <label for="alternativeSuggestion" class="form-label">Alternative Suggestion</label>
          <textarea class="form-control" id="alternativeSuggestion" rows="2" placeholder="Suggest an alternative time, date, or doctor"></textarea>
        </div>
        <div class="form-check mb-3">
          <input class="form-check-input" type="checkbox" id="sendRejectionNotification" checked>
          <label class="form-check-label" for="sendRejectionNotification">
            Send notification to patient
          </label>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
        <button type="button" class="btn btn-danger" id="confirmReject">Reject Appointment</button>
      </div>
    </div>
  </div>
</div>

<!-- Reschedule Appointment Modal -->
<div class="modal fade" id="rescheduleModal" tabindex="-1" aria-labelledby="rescheduleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="rescheduleModalLabel">Reschedule Appointment</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <p>Reschedule appointment for <span id="reschedulePatient">Patient Name</span></p>
        <div class="mb-3">
          <strong>Current Date:</strong> <span id="rescheduleDate">Date</span>
        </div>
        <div class="mb-3">
          <strong>Current Time:</strong> <span id="rescheduleTime">Time</span>
        </div>
        <div class="mb-3">
          <label for="newDate" class="form-label">New Date</label>
          <input type="date" class="form-control" id="newDate" required min="2025-03-22">
        </div>
        <div class="mb-3">
          <label for="newTime" class="form-label">New Time</label>
          <select class="form-select" id="newTime" required>
            <option value="" selected disabled>Select a time slot</option>
            <option value="09:00">9:00 AM - 10:00 AM</option>
            <option value="10:00">10:00 AM - 11:00 AM</option>
            <option value="11:00">11:00 AM - 12:00 PM</option>
            <option value="13:00">1:00 PM - 2:00 PM</option>
            <option value="14:00">2:00 PM - 3:00 PM</option>
            <option value="15:00">3:00 PM - 4:00 PM</option>
            <option value="16:00">4:00 PM - 5:00 PM</option>
          </select>
        </div>
        <div class="mb-3">
          <label for="rescheduleReason" class="form-label">Reason for Rescheduling</label>
          <textarea class="form-control" id="rescheduleReason" rows="2"></textarea>
        </div>
        <div class="form-check mb-3">
          <input class="form-check-input" type="checkbox" id="sendRescheduleNotification" checked>
          <label class="form-check-label" for="sendRescheduleNotification">
            Send notification to patient
          </label>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
        <button type="button" class="btn btn-primary" id="confirmReschedule">Reschedule</button>
      </div>
    </div>
  </div>
</div>

<!-- Patient Details Modal -->
<div class="modal fade" id="patientDetailsModal" tabindex="-1" aria-labelledby="patientDetailsModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="patientDetailsModalLabel">Patient Details</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <div class="row mb-4">
          <div class="col-md-6">
            <h6>Personal Information</h6>
            <div class="mb-2">
              <strong>Name:</strong> <span id="patientName">Patient Name</span>
            </div>
            <div class="mb-2">
              <strong>ID:</strong> <span id="patientID">Patient ID</span>
            </div>
            <div class="mb-2">
              <strong>Age:</strong> <span id="patientAge">Age</span>
            </div>
            <div class="mb-2">
              <strong>Gender:</strong> <span id="patientGender">Gender</span>
            </div>
            <div class="mb-2">
              <strong>Contact:</strong> <span id="patientContact">Contact</span>
            </div>
            <div class="mb-2">
              <strong>Email:</strong> <span id="patientEmail">Email</span>
            </div>
          </div>
          <div class="col-md-6">
            <h6>Medical Information</h6>
            <div class="mb-2">
              <strong>Diagnosis:</strong> <span id="patientDiagnosis">Diagnosis</span>
            </div>
            <div class="mb-2">
              <strong>Risk Level:</strong> <span id="patientRisk">Risk Level</span>
            </div>
            <div class="mb-2">
              <strong>Treatment Stage:</strong> <span id="patientStage">Stage</span>
            </div>
            <div class="mb-2">
              <strong>Primary Physician:</strong> <span id="patientPhysician">Physician</span>
            </div>
            <div class="mb-2">
              <strong>Last Visit:</strong> <span id="patientLastVisit">Last Visit</span>
            </div>
          </div>
        </div>
        <div class="mb-4">
          <h6>Recent Medical History</h6>
          <div id="patientHistory" class="bg-light p-3 rounded">
            Medical history will appear here
          </div>
        </div>
        <div class="mb-4">
          <h6>Upcoming Appointments</h6>
          <div id="patientAppointments" class="bg-light p-3 rounded">
            Appointments will appear here
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        <a href="patient-info.html" class="btn btn-medical">View Full Profile</a>
      </div>
    </div>
  </div>
</div>

<div class="decorative-wave"></div>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Handle approve modal
    const approveModal = document.getElementById('approveModal');
    if(approveModal) {
      approveModal.addEventListener('show.bs.modal', function(event) {
        const button = event.relatedTarget;
        const patient = button.getAttribute('data-patient');
        const date = button.getAttribute('data-date');
        const time = button.getAttribute('data-time');
        
        document.getElementById('approvePatient').textContent = patient;
        document.getElementById('approveDate').textContent = date;
        document.getElementById('approveTime').textContent = time;
      });
      
      // Handle approve confirmation
      const confirmApprove = document.getElementById('confirmApprove');
      if(confirmApprove) {
        confirmApprove.addEventListener('click', function() {
          // Here you would add AJAX call to approve the appointment
          alert('Appointment approved successfully.');
          // Close modal and refresh page
          const modal = bootstrap.Modal.getInstance(approveModal);
          modal.hide();
          location.reload();
        });
      }
    }
    
    // Handle reject modal
    const rejectModal = document.getElementById('rejectModal');
    if(rejectModal) {
      rejectModal.addEventListener('show.bs.modal', function(event) {
        const button = event.relatedTarget;
        const patient = button.getAttribute('data-patient');
        const date = button.getAttribute('data-date');
        const time = button.getAttribute('data-time');
        
        document.getElementById('rejectPatient').textContent = patient;
        document.getElementById('rejectDate').textContent = date;
        document.getElementById('rejectTime').textContent = time;
      });
      
      // Show "other" reason field if "other" is selected
      const rejectReason = document.getElementById('rejectReason');
      const otherRejectReasonDiv = document.getElementById('otherRejectReasonDiv');
      
      if(rejectReason) {
        rejectReason.addEventListener('change', function() {
          otherRejectReasonDiv.style.display = this.value === 'other' ? 'block' : 'none';
        });
      }
      
      // Handle reject confirmation
      const confirmReject = document.getElementById('confirmReject');
      if(confirmReject) {
        confirmReject.addEventListener('click', function() {
          // Here you would add AJAX call to reject the appointment
          alert('Appointment rejected successfully.');
          // Close modal and refresh page
          const modal = bootstrap.Modal.getInstance(rejectModal);
          modal.hide();
          location.reload();
        });
      }
    }
    
    // Handle reschedule modal
    const rescheduleModal = document.getElementById('rescheduleModal');
    if(rescheduleModal) {
      rescheduleModal.addEventListener('show.bs.modal', function(event) {
        const button = event.relatedTarget;
        const patient = button.getAttribute('data-patient');
        const date = button.getAttribute('data-date');
        const time = button.getAttribute('data-time');
        
        document.getElementById('reschedulePatient').textContent = patient;
        if(date) document.getElementById('rescheduleDate').textContent = date;
        if(time) document.getElementById('rescheduleTime').textContent = time;
      });
      
      // Handle reschedule confirmation
      const confirmReschedule = document.getElementById('confirmReschedule');
      if(confirmReschedule) {
        confirmReschedule.addEventListener('click', function() {
          const newDate = document.getElementById('newDate').value;
          const newTime = document.getElementById('newTime').value;
          
          if(!newDate || !newTime) {
            alert('Please select a new date and time.');
            return;
          }
          
          // Here you would add AJAX call to reschedule the appointment
          alert('Appointment rescheduled successfully.');
          // Close modal and refresh page
          const modal = bootstrap.Modal.getInstance(rescheduleModal);
          modal.hide();
          location.reload();
        });
      }
    }
    
    // Handle patient details modal
    const patientDetailsModal = document.getElementById('patientDetailsModal');
    if(patientDetailsModal) {
      patientDetailsModal.addEventListener('show.bs.modal', function(event) {
        const button = event.relatedTarget;
        const patientId = button.getAttribute('data-patient-id');
        
        // Here you would fetch patient details using AJAX
        // For now, we'll use dummy data
        const patientData = {
          'JW001': {
            name: 'James Wilson',
            age: 58,
            gender: 'Male',
            contact: '(555) 123-4567',
            email: 'james.wilson@example.com',
            diagnosis: 'Stage 3 Lung Cancer',
            risk: 'High',
            stage: 'Undergoing chemotherapy',
            physician: 'Dr. Sarah Wilson',
            lastVisit: 'Mar 10, 2025',
            history: 'Patient has been undergoing chemotherapy for the past 3 months. Recent CT scan shows reduction in tumor size. Experiencing increased fatigue and nausea after last session.',
            appointments: 'Mar 24, 2025 - Follow-up after chemotherapy (Pending)'
          },
          'SJ002': {
            name: 'Sarah Johnson',
            age: 45,
            gender: 'Female',
            contact: '(555) 234-5678',
            email: 'sarah.johnson@example.com',
            diagnosis: 'Stage 2 Breast Cancer',
            risk: 'Medium',
            stage: 'Recently diagnosed',
            physician: 'Dr. Sarah Wilson',
            lastVisit: 'Mar 15, 2025',
            history: 'Recently diagnosed with Stage 2 Breast Cancer. Initial consultation completed. Awaiting treatment plan discussion.',
            appointments: 'Mar 23, 2025 - Initial consultation after diagnosis (Pending)'
          },
          // Add more patient data as needed
        };
        
        // Fill in the modal with patient data
        if(patientData[patientId]) {
          const patient = patientData[patientId];
          document.getElementById('patientName').textContent = patient.name;
          document.getElementById('patientID').textContent = patientId;
          document.getElementById('patientAge').textContent = patient.age;
          document.getElementById('patientGender').textContent = patient.gender;
          document.getElementById('patientContact').textContent = patient.contact;
          document.getElementById('patientEmail').textContent = patient.email;
          document.getElementById('patientDiagnosis').textContent = patient.diagnosis;
          document.getElementById('patientRisk').textContent = patient.risk;
          document.getElementById('patientStage').textContent = patient.stage;
          document.getElementById('patientPhysician').textContent = patient.physician;
          document.getElementById('patientLastVisit').textContent = patient.lastVisit;
          document.getElementById('patientHistory').textContent = patient.history;
          document.getElementById('patientAppointments').textContent = patient.appointments;
        } else {
          // If patient data not found, show placeholder
          document.getElementById('patientName').textContent = 'Patient data not available';
        }
      });
    }
  });
</script>

